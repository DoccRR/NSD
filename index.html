<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NOIZE SECRET DOCTRINE ‚Äî Official</title>
<meta name="description" content="NSD aKa Noize Secret Doctrine ‚Äî Official portal. Hardcore, Terrorcore, Speedcore, Uptempo Hardcore.">
<meta name="color-scheme" content="dark">
<style>
:root{
  --bg:#000;
  --fg:#fff;
  --muted:#aaa;
  --radius:20px;
  --font-futuristic:"Orbitron","Rajdhani","Exo 2",sans-serif;
  --accent:#e60000;
}

*{box-sizing:border-box;}
html,body{
  height:100%; margin:0; font-family:var(--font-futuristic);
  background:var(--bg) url('fondo.png') center/cover no-repeat fixed;
  color:var(--fg); overflow-x:hidden;
}

/* Carousel */
.carousel-container{
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  width:100vw; height:100vh;
  padding:40px 0;
}
.carousel-container::-webkit-scrollbar{display:none;}
.carousel-container{-ms-overflow-style:none; scrollbar-width:none;}

/* Slides generales */
.slide{
  flex:0 0 80%;
  max-width:800px;
  height:80%;
  margin:0 30px;
  border-radius:var(--radius);
  scroll-snap-align:center;
  background-size:cover;
  background-position:center;
  display:flex;
  justify-content:center;
  align-items:flex-end;
  box-shadow:0 10px 30px rgba(0,0,0,0.6);
  position:relative;
  overflow:hidden;
  transition:transform .3s ease;
  text-decoration:none;
}
.slide:hover{transform:scale(1.03);}
.slide::after{
  content:"";
  position:absolute;
  bottom:0; left:0;
  width:100%; height:60%;
  background:linear-gradient(to top, rgba(0,0,0,0.75), transparent);
}
.slide span{
  position:relative;
  z-index:2;
  font-size:clamp(20px,3vw,32px);
  font-weight:900;
  text-transform:uppercase;
  color:var(--fg);
  text-shadow:0 0 10px rgba(0,0,0,0.8);
  margin-bottom:25px;
}
.slide.welcome::after{content:none;}

/* Snake slide */
.slide.snake-slide{
  flex:0 0 95%;
  max-width:1200px;
  height:90%;
  align-items:center;
  justify-content:center;
}
.slide.snake-slide::after{content:none;}
.slide.snake-slide span{display:none;}

/* Snake contenido */
.play-inner{
  position:relative;
  z-index:2; width:100%;
  display:flex; flex-direction:column;
  align-items:center; gap:12px;
  height:100%;
}
#snakeWrap{
  flex:1;
  display:flex; justify-content:center; align-items:center;
  background:#000;
  border:4px solid #fff; 
  border-radius:12px; padding:8px;
  width:100%;
  position:relative;
}
#snakeCanvas{
  display:block;
  width:100%; max-width:1000px;
  height:auto; background:#000;
  border:2px solid var(--accent);
  border-radius:10px;
}

/* Snake UI */
.snake-ui{font-size:12px; color:var(--muted); text-align:center;}
.score{
  position:absolute; top:10px; left:10px;
  font-size:14px; color:#bbb;
  background:rgba(0,0,0,0.5); padding:4px 8px; border-radius:6px;
}

/* Overlay Game Over */
#gameOverOverlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.9);
  display:none;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  color:#fff;
  text-align:center;
  z-index:10;
}
#gameOverOverlay h2{font-size:2rem; margin-bottom:15px;}
#nicknameInput{padding:8px; margin:10px; font-size:16px; border-radius:6px;}
#submitScore, #playAgainBtn{
  padding:8px 16px; 
  background:var(--accent); 
  border:none; 
  color:#fff; 
  font-weight:bold; 
  border-radius:6px; 
  cursor:pointer;
  margin-top:5px;
}
#ranking{margin-top:20px; text-align:left;}

/* Footer */
.footer-genres, .footer-records{
  position:absolute;
  width:100%; text-align:center;
  font-size:12px; color:var(--muted);
}
.footer-genres{bottom:110px;}
.footer-records{bottom:90px; letter-spacing:2px;}

/* Arrows */
.arrow{
  position:absolute;
  top:50%; transform:translateY(-50%);
  font-size:40px; color:rgba(255,255,255,0.6);
  z-index:10; cursor:pointer;
  animation:blink 1.5s infinite;
}
.arrow.left{left:15px;} .arrow.right{right:15px;}
@keyframes blink{0%,100%{opacity:0.4;}50%{opacity:1;}}

/* Responsive Snake */
@media(max-width:768px){
  .slide.snake-slide{
    flex:0 0 100%;
    max-width:100%;
    height:100vh;
    border-radius:0;
  }
  #snakeWrap{border-radius:0; border:none; padding:0;}
  #snakeCanvas{width:90vw; height:90vw; max-width:400px; max-height:400px;}
  .snake-ui{position:absolute; bottom:60px; font-size:14px;}
}

@media(min-width:768px){
  #snakeCanvas{
    width:80vw;
    height:45vw;
    max-width:800px;
    max-height:450px;
  }
}

/* Player Controls */
#playerControls{
  position:fixed;
  bottom:20px; left:50%;
  transform:translateX(-50%);
  background:#000;
  border:2px solid var(--fg);
  border-radius:40px;
  padding:10px 20px;
  font-size:16px; font-weight:700;
  color:#fff;
  display:flex; align-items:center; gap:15px;
  z-index:50;
}
#playerControls button{
  background:none; border:none; color:#fff;
  font-size:20px; cursor:pointer;
}
#playerControls button:disabled{opacity:.5; cursor:not-allowed;}
#volumeSlider{width:100px;}
</style>
</head>
<body>

<!-- Flechas -->
<div class="arrow left" onclick="scrollCarousel(-1)">‚ùÆ</div>
<div class="arrow right" onclick="scrollCarousel(1)">‚ùØ</div>

<main class="carousel-container">
  <!-- WELCOME -->
  <div class="slide welcome" style="background-image:url('NSD.jpg')">
    <span>WELCOME</span>
  </div>

  <!-- Enlaces -->
  <a class="slide" href="https://noizesecretdoctrine.bandcamp.com" target="_blank" style="background-image:url('bandcamp.png')"><span>BUY MUSIC</span></a>
  <a class="slide" href="https://youtube.com/@noizesecretdoctrine" target="_blank" style="background-image:url('youtube.png')"><span>YOUTUBE</span></a>
  <a class="slide" href="https://open.spotify.com/intl-es/artist/79wYn0trIxj3ewBLhOBUzX" target="_blank" style="background-image:url('spotify.png')"><span>SPOTIFY</span></a>
  <a class="slide" href="https://instagram.com/nsd_noi" target="_blank" style="background-image:url('instagram.png')"><span>INSTAGRAM</span></a>
  <a class="slide" href="https://triple6.nl/bookings/" target="_blank" style="background-image:url('bookings.png')"><span>BOOKINGS</span></a>
  <a class="slide" href="https://triple6-shop.nl/collections/nsd" target="_blank" style="background-image:url('merch.png')"><span>MERCHANDISING</span></a>

  <!-- Snake -->
  <div class="slide snake-slide">
    <div class="play-inner" id="snake">
      <div id="snakeWrap">
        <div class="score" id="score">SCORE: 0</div>
        <canvas id="snakeCanvas" width="400" height="400"></canvas>
        <div id="gameOverOverlay">
          <h2>NSD TOP FREAKS</h2>
          <div id="ranking"></div>
          <input type="text" id="nicknameInput" placeholder="Enter nickname" maxlength="12">
          <button id="submitScore">Save Score</button>
          <button id="playAgainBtn">Play Again</button>
        </div>
      </div>
      <div class="snake-ui">Mueve con flechas o deslizando el dedo</div>
    </div>
  </div>
</main>

<!-- Player Controls -->
<div id="playerControls">
  <button id="prevBtn" disabled>‚èÆ</button>
  <button id="playPauseBtn" disabled>‚ñ∂</button>
  <button id="nextBtn" disabled>‚è≠</button>
  <input type="range" id="volumeSlider" min="0" max="100" value="80" disabled>
</div>

<footer class="footer-genres">Hardcore, Terrorcore, Speedcore, Uptempo Hardcore</footer>
<div class="footer-records">DOCTRINE RECORDS</div>

<!-- SoundCloud Widget (oculto pero operativo) -->
<iframe
  id="scPlayer"
  src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/noizesd&auto_play=false&hide_related=true&show_comments=false&show_user=false&show_reposts=false&visual=false&show_teaser=false"
  allow="autoplay"
  style="position:fixed; left:-9999px; width:1px; height:1px; opacity:0; pointer-events:none; border:0;"
  aria-hidden="true"
  tabindex="-1"
></iframe>
<script src="https://w.soundcloud.com/player/api.js"></script>


<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js"></script>
<script src="https://w.soundcloud.com/player/api.js"></script>

<script>
/* üé† Carousel */
const carousel=document.querySelector('.carousel-container');
function scrollCarousel(d){
  const slideWidth=document.querySelector('.slide').offsetWidth+60;
  carousel.scrollBy({left:slideWidth*d,behavior:'smooth'});
}
carousel.addEventListener('wheel',e=>{
  e.preventDefault();
  carousel.scrollBy({left:e.deltaY,behavior:'smooth'});
});

/* üêç Snake Game */
const canvas=document.getElementById("snakeCanvas");
const ctx=canvas.getContext("2d");
const scoreEl=document.getElementById("score");
const overlay=document.getElementById("gameOverOverlay");
const rankingEl=document.getElementById("ranking");
const nicknameInput=document.getElementById("nicknameInput");
const submitScoreBtn=document.getElementById("submitScore");
const playAgainBtn=document.getElementById("playAgainBtn");
const box=20;
let snake,dx,dy,food,score,game;

/* üîí Bloquear flechas navegador */
document.addEventListener("keydown", e=>{
  if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){
    e.preventDefault();
  }
});

/* üî• Firebase config */
const firebaseConfig = {
  apiKey: "AIzaSyANmEBw9kBijdWHmxV5cIBHy1patcfAuvA",
  authDomain: "nsdsnake.firebaseapp.com",
  databaseURL: "https://nsdsnake-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "nsdsnake",
  storageBucket: "nsdsnake.firebasestorage.app",
  messagingSenderId: "719565977829",
  appId: "1:719565977829:web:94911f469efd29aa9c7c0c"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* === Snake === */
function initGame(){
  snake=[{x:9*box,y:10*box}];
  dx=box;dy=0;
  score=0;
  scoreEl.textContent="SCORE: "+score;
  food=randomFood();
  overlay.style.display="none";
  clearInterval(game);
  game=setInterval(draw,100);
}
function randomFood(){
  const letters=["N","S","D"];
  return {
    x:Math.floor(Math.random()*(canvas.width/box))*box,
    y:Math.floor(Math.random()*(canvas.height/box))*box,
    letter:letters[Math.floor(Math.random()*letters.length)]
  };
}
function draw(){
  ctx.fillStyle="#000";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#0f0";
  snake.forEach(s=>ctx.fillRect(s.x,s.y,box,box));
  ctx.fillStyle="#fff";
  ctx.font="16px Orbitron, sans-serif";
  ctx.textAlign="center"; ctx.textBaseline="middle";
  ctx.fillText(food.letter,food.x+box/2,food.y+box/2);
  let head={x:snake[0].x+dx,y:snake[0].y+dy};
  if(head.x===food.x&&head.y===food.y){
    score++;scoreEl.textContent="SCORE: "+score;
    food=randomFood();
  }else snake.pop();
  if(head.x<0||head.y<0||head.x>=canvas.width||head.y>=canvas.height||snake.some(s=>s.x===head.x&&s.y===head.y)){
    clearInterval(game);showGameOver();return;
  }
  snake.unshift(head);
}
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft"&&dx===0){dx=-box;dy=0;}
  else if(e.key==="ArrowUp"&&dy===0){dx=0;dy=-box;}
  else if(e.key==="ArrowRight"&&dx===0){dx=box;dy=0;}
  else if(e.key==="ArrowDown"&&dy===0){dx=0;dy=box;}
});
let touchStartX,touchStartY;
canvas.addEventListener("touchstart",e=>{
  let t=e.touches[0];touchStartX=t.clientX;touchStartY=t.clientY;
});
canvas.addEventListener("touchend",e=>{
  let t=e.changedTouches[0];let dxT=t.clientX-touchStartX;let dyT=t.clientY-touchStartY;
  if(Math.abs(dxT)>Math.abs(dyT)){
    if(dxT>0&&dx===0){dx=box;dy=0;}
    else if(dxT<0&&dx===0){dx=-box;dy=0;}
  }else{
    if(dyT>0&&dy===0){dx=0;dy=box;}
    else if(dyT<0&&dy===0){dx=0;dy=-box;}
  }
});

/* üèÜ Ranking con Firebase */
function showGameOver(){overlay.style.display="flex";loadRanking();}
submitScoreBtn.addEventListener("click",()=>{
  const name=nicknameInput.value.trim()||"Anon";
  db.ref("snakeRanking").push({name,score});
  nicknameInput.value="";
});
function loadRanking(){
  db.ref("snakeRanking").orderByChild("score").limitToLast(10).on("value",snap=>{
    let data=[];snap.forEach(c=>data.unshift(c.val()));
    rankingEl.innerHTML=data.map((r,i)=>`<div>${i+1}. ${r.name} ‚Äî ${r.score}</div>`).join("");
  });
}
playAgainBtn.addEventListener("click",initGame);
initGame();

/* üì± Bloquear scroll solo cuando Snake est√° visible */
const snakeSection=document.getElementById("snake");
if('IntersectionObserver' in window){
  const io=new IntersectionObserver(entries=>{
    entries.forEach(entry=>{
      document.body.style.overflow = entry.isIntersecting ? 'hidden' : '';
    });
  },{threshold:0.15});
  io.observe(snakeSection);
}else{
  document.addEventListener("scroll",()=>{
    const rect=snakeSection.getBoundingClientRect();
    document.body.style.overflow = (rect.top<window.innerHeight && rect.bottom>0) ? "hidden" : "";
  });
}

/* üéµ SoundCloud Player (controles propios) */
const prevBtn = document.getElementById('prevBtn');
const playPauseBtn = document.getElementById('playPauseBtn');
const nextBtn = document.getElementById('nextBtn');
const volumeSlider = document.getElementById('volumeSlider');

const scIframe = document.getElementById('scPlayer');
const scWidget = SC.Widget(scIframe);

let widgetReady = false;
let isPlaying = false;

scWidget.bind(SC.Widget.Events.READY, function(){
  widgetReady = true;
  const vol = Math.max(0, Math.min(100, parseInt(volumeSlider.value || '80',10)));
  scWidget.setVolume(vol);
  scWidget.getSounds(function(sounds){
    const multiple = Array.isArray(sounds) && sounds.length > 1;
    prevBtn.disabled = !multiple;
    nextBtn.disabled = !multiple;
  });
  playPauseBtn.disabled = false;
  volumeSlider.disabled = false;
});
scWidget.bind(SC.Widget.Events.PLAY, function(){isPlaying = true;playPauseBtn.textContent = '‚è∏';});
scWidget.bind(SC.Widget.Events.PAUSE, function(){isPlaying = false;playPauseBtn.textContent = '‚ñ∂';});
scWidget.bind(SC.Widget.Events.FINISH, function(){isPlaying = false;playPauseBtn.textContent = '‚ñ∂';});
playPauseBtn.addEventListener('click', function(){if(!widgetReady) return;if(isPlaying){scWidget.pause();} else {scWidget.play();}});
prevBtn.addEventListener('click', function(){if(widgetReady) scWidget.prev();});
nextBtn.addEventListener('click', function(){if(widgetReady) scWidget.next();});
volumeSlider.addEventListener('input', function(e){if(widgetReady){const v=Math.max(0,Math.min(100,parseInt(e.target.value||'0',10)));scWidget.setVolume(v);}});
</script>

</body>
</html>
