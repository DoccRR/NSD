<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NOIZE SECRET DOCTRINE — Official</title>
<meta name="description" content="NSD aKa Noize Secret Doctrine — Official portal. Hardcore, Terrorcore, Speedcore, Uptempo Hardcore.">
<meta name="color-scheme" content="dark">
<style>
:root{
  --bg:#000;
  --fg:#fff;
  --muted:#aaa;
  --radius:20px;
  --font-futuristic:"Orbitron","Rajdhani","Exo 2",sans-serif;
  --accent:#e60000;
}

*{box-sizing:border-box;}
html,body{
  height:100%; margin:0; font-family:var(--font-futuristic);
  background:var(--bg) url('fondo.png') center/cover no-repeat fixed;
  color:var(--fg); overflow-x:hidden; overflow-y:hidden;
}

/* Carousel */
.carousel-container{
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  width:100vw; height:100vh;
  padding:40px 0;
}
.carousel-container::-webkit-scrollbar{display:none;}
.carousel-container{-ms-overflow-style:none; scrollbar-width:none;}

/* Slides */
.slide{
  flex:0 0 80%;
  max-width:800px;
  height:80%;
  margin:0 30px;
  border-radius:var(--radius);
  scroll-snap-align:center;
  background-size:cover;
  background-position:center;
  display:flex;
  justify-content:center;
  align-items:flex-end;
  box-shadow:0 10px 30px rgba(0,0,0,0.6);
  position:relative;
  overflow:hidden;
  transition:transform .3s ease;
  text-decoration:none;
}
.slide:hover{transform:scale(1.03);}
.slide::after{
  content:"";
  position:absolute;
  bottom:0; left:0;
  width:100%; height:60%;
  background:linear-gradient(to top, rgba(0,0,0,0.75), transparent);
}
.slide span{
  position:relative;
  z-index:2;
  font-size:clamp(20px,3vw,32px);
  font-weight:900;
  text-transform:uppercase;
  color:var(--fg);
  text-shadow:0 0 10px rgba(0,0,0,0.8);
  margin-bottom:25px;
}
.slide.welcome::after{content:none;}

/* Snake slide */
.slide.snake-slide{
  flex:0 0 95%;
  max-width:1200px;
  height:90%;
  align-items:center;
  justify-content:center;
}
.slide.snake-slide::after{content:none;}
.slide.snake-slide span{display:none;}

/* Snake contenido */
.play-inner{
  position:relative;
  z-index:2; width:100%;
  display:flex; flex-direction:column;
  align-items:center; gap:12px;
  height:100%;
}
#snakeWrap{
  flex:1;
  display:flex; justify-content:center; align-items:center;
  background:#000;
  border:4px solid #fff; 
  border-radius:12px; padding:8px;
  width:100%;
  position:relative;
}
#snakeCanvas{
  display:block;
  width:100%; max-width:1000px;
  height:auto; background:#000;
  border:2px solid var(--accent);
  border-radius:10px;
}
.score{
  position:absolute; top:10px; left:10px;
  font-size:14px; color:#bbb;
  background:rgba(0,0,0,0.5); padding:4px 8px; border-radius:6px;
}
#gameOverOverlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.9);
  display:none;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  color:#fff;
  text-align:center;
  z-index:10;
}
#gameOverOverlay h2{font-size:2rem; margin-bottom:15px;}
#playAgainBtn{
  padding:8px 16px; 
  background:var(--accent); 
  border:none; 
  color:#fff; 
  font-weight:bold; 
  border-radius:6px; 
  cursor:pointer;
  margin-top:5px;
}

/* Footer */
.footer-genres, .footer-records{
  position:absolute;
  width:100%; text-align:center;
  font-size:12px; color:var(--muted);
}
.footer-genres{bottom:110px;}
.footer-records{bottom:90px; letter-spacing:2px;}

/* Arrows */
.arrow{
  position:absolute;
  top:50%; transform:translateY(-50%);
  font-size:40px; color:rgba(255,255,255,0.6);
  z-index:10; cursor:pointer;
  animation:blink 1.5s infinite;
}
.arrow.left{left:15px;} .arrow.right{right:15px;}
@keyframes blink{0%,100%{opacity:0.4;}50%{opacity:1;}}

/* Responsive Snake */
@media(max-width:768px){
  .slide.snake-slide{
    flex:0 0 100%;
    max-width:100%;
    height:100vh;
    border-radius:0;
  }
  #snakeWrap{border-radius:0; border:none; padding:0;}
  #snakeCanvas{width:90vw; height:90vw; max-width:400px; max-height:400px;}
}
@media(min-width:768px){
  #snakeCanvas{
    width:80vw;
    height:45vw;
    max-width:800px;
    max-height:450px;
  }
}
</style>
</head>
<body>

<!-- Flechas -->
<div class="arrow left" onclick="scrollCarousel(-1)">❮</div>
<div class="arrow right" onclick="scrollCarousel(1)">❯</div>

<main class="carousel-container">
  <!-- WELCOME -->
  <div class="slide welcome" style="background-image:url('NSD.jpg')">
    <span>WELCOME</span>
  </div>

  <!-- Enlaces -->
  <a class="slide" href="https://noizesecretdoctrine.bandcamp.com" target="_blank" style="background-image:url('bandcamp.png')"><span>BUY MUSIC</span></a>
  <a class="slide" href="https://youtube.com/@noizesecretdoctrine" target="_blank" style="background-image:url('youtube.png')"><span>YOUTUBE</span></a>
  <a class="slide" href="https://open.spotify.com/intl-es/artist/79wYn0trIxj3ewBLhOBUzX" target="_blank" style="background-image:url('spotify.png')"><span>SPOTIFY</span></a>
  <a class="slide" href="https://instagram.com/nsd_noi" target="_blank" style="background-image:url('instagram.png')"><span>INSTAGRAM</span></a>
  <a class="slide" href="https://triple6.nl/bookings/" target="_blank" style="background-image:url('bookings.png')"><span>BOOKINGS</span></a>
  <a class="slide" href="https://triple6-shop.nl/collections/nsd" target="_blank" style="background-image:url('merch.png')"><span>MERCHANDISING</span></a>

  <!-- Snake -->
  <div class="slide snake-slide">
    <div class="play-inner" id="snake">
      <div id="snakeWrap">
        <div class="score" id="score">SCORE: 0</div>
        <canvas id="snakeCanvas" width="400" height="400"></canvas>
        <div id="gameOverOverlay">
          <h2>GAME OVER</h2>
          <button id="playAgainBtn">Play Again</button>
        </div>
      </div>
      <div class="snake-ui">Mueve con flechas o deslizando el dedo</div>
    </div>
  </div>
</main>

<!-- Footer -->
<div class="footer-genres">Hardcore • Terrorcore • Speedcore • Uptempo Hardcore</div>
<div class="footer-records">NSD RECORDS</div>

<!-- SoundCloud Player -->
<div style="position:absolute;bottom:40px;left:50%;transform:translateX(-50%);width:300px;z-index:20;text-align:center;">
  <iframe id="scPlayer" width="100%" height="100" scrolling="no" frameborder="no"
    src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/nsd-aka-noize-secret-doctrine/sets/nsd-official&color=%23ff5500&auto_play=false&hide_related=false&show_comments=false&show_user=true&show_reposts=false&show_teaser=true&visual=false"></iframe>
  <div style="margin-top:6px;">
    <button onclick="scWidget.play()">Play</button>
    <button onclick="scWidget.pause()">Pause</button>
  </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js"></script>
<script>
/* ---------------- Firebase Setup ---------------- */
const firebaseConfig = {
  apiKey: "AIzaSyANmEBw9kBijdWHmxV5cIBHy1patcfAuvA",
  authDomain: "nsdsnake.firebaseapp.com",
  projectId: "nsdsnake",
  storageBucket: "nsdsnake.firebasestorage.app",
  messagingSenderId: "719565977829",
  appId: "1:719565977829:web:94911f469efd29aa9c7c0c",
  databaseURL: "https://nsdsnake-default-rtdb.europe-west1.firebasedatabase.app"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ---------------- Snake Game ---------------- */
const canvas=document.getElementById("snakeCanvas");
const ctx=canvas.getContext("2d");
let box=20;
let snake=[{x:9*box,y:10*box}];
let direction;
let food=generateFood();
let score=0;
let gameInterval;
let overlay=document.getElementById("gameOverOverlay");
let scoreElement=document.getElementById("score");

function generateFood(){
  let letters=["N","S","D"];
  return{
    x:Math.floor(Math.random()*19+1)*box,
    y:Math.floor(Math.random()*19+1)*box,
    letter:letters[Math.floor(Math.random()*letters.length)]
  };
}
document.addEventListener("keydown",function(e){
  if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"," "].includes(e.key)) e.preventDefault();
  if(e.key=="ArrowLeft" && direction!="RIGHT") direction="LEFT";
  else if(e.key=="ArrowUp" && direction!="DOWN") direction="UP";
  else if(e.key=="ArrowRight" && direction!="LEFT") direction="RIGHT";
  else if(e.key=="ArrowDown" && direction!="UP") direction="DOWN";
});
function collision(head,array){
  return array.some(p=>head.x===p.x && head.y===p.y);
}
function draw(){
  ctx.fillStyle="black";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  for(let i=0;i<snake.length;i++){
    ctx.fillStyle=(i==0)?"lime":"white";
    ctx.fillRect(snake[i].x,snake[i].y,box,box);
  }
  ctx.fillStyle="white";
  ctx.font="20px Orbitron";
  ctx.fillText(food.letter,food.x+5,food.y+15);

  let head={x:snake[0].x,y:snake[0].y};
  if(direction=="LEFT") head.x-=box;
  if(direction=="UP") head.y-=box;
  if(direction=="RIGHT") head.x+=box;
  if(direction=="DOWN") head.y+=box;

  if(head.x==food.x && head.y==food.y){
    score++;
    scoreElement.innerText="SCORE: "+score;
    food=generateFood();
  }else snake.pop();

  if(head.x<0||head.x>=canvas.width||head.y<0||head.y>=canvas.height||collision(head,snake)){
    clearInterval(gameInterval);
    overlay.style.display="flex";
    saveScore(score);
    return;
  }
  snake.unshift(head);
}
function startGame(){
  snake=[{x:9*box,y:10*box}];
  direction=null; score=0; scoreElement.innerText="SCORE: 0";
  food=generateFood(); overlay.style.display="none";
  clearInterval(gameInterval);
  gameInterval=setInterval(draw,100);
}
document.getElementById("playAgainBtn").addEventListener("click",startGame);
startGame();

/* ---------------- Save Score in Firebase ---------------- */
function saveScore(score){
  let nickname=prompt("Introduce tu nombre:");
  if(!nickname) nickname="Anon";
  firebase.database().ref("scores").push({
    nickname:nickname,
    score:score,
    timestamp:Date.now()
  });
}

/* ---------------- Ranking Global ---------------- */
const rankingDiv = document.createElement("div");
rankingDiv.id = "ranking";
rankingDiv.style = "position:absolute;bottom:160px;left:50%;transform:translateX(-50%);color:white;font-size:14px;text-align:center;background:rgba(0,0,0,0.6);padding:6px 12px;border-radius:8px;max-width:90%;";
document.body.appendChild(rankingDiv);

function loadRanking(){
  db.ref("scores").orderByChild("score").limitToLast(5).on("value", snapshot=>{
    let scores=[];
    snapshot.forEach(child=>{ scores.push(child.val()); });
    scores.sort((a,b)=>b.score-a.score);
    rankingDiv.innerHTML = "<b>TOP 5 PLAYERS</b><br>" +
      scores.map(s=>`${s.nickname}: ${s.score}`).join("<br>");
  });
}
loadRanking();

/* ---------------- Carousel ---------------- */
const container=document.querySelector(".carousel-container");
let currentIndex = 0;

function scrollCarousel(dir){
  const slides = document.querySelectorAll(".slide");
  const slideWidth = slides[0].getBoundingClientRect().width + 60;
  currentIndex += dir;
  if(currentIndex < 0) currentIndex = 0;
  if(currentIndex >= slides.length) currentIndex = slides.length - 1;
  container.scrollTo({
    left: currentIndex * slideWidth,
    behavior: "smooth"
  });
}
let touchStartX=0;
container.addEventListener("touchstart",e=>{touchStartX=e.changedTouches[0].screenX;},{passive:true});
container.addEventListener("touchend",e=>{
  let dx=e.changedTouches[0].screenX-touchStartX;
  if(dx>50) scrollCarousel(-1); else if(dx<-50) scrollCarousel(1);
});
  /* ---------------- Scroll con rueda del ratón ---------------- */
container.addEventListener("wheel", (e) => {
  e.preventDefault(); // evita que haga scroll en la página
  if (e.deltaY > 0) {
    scrollCarousel(1);   // rueda hacia abajo -> siguiente slide
  } else {
    scrollCarousel(-1);  // rueda hacia arriba -> slide anterior
  }
}, { passive: false });

</script>

<!-- ---------------- SoundCloud Player (hidden iframe + custom controls) ---------------- -->
<div style="position:absolute;bottom:40px;left:50%;transform:translateX(-50%);width:320px;z-index:20;text-align:center;">
  <!-- Iframe oculto -->
  <iframe 
    id="scPlayer"
    style="display:none;"
    width="0"
    height="0"
    scrolling="no"
    frameborder="no"
    src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/noizesd&auto_play=false&show_comments=false&visual=false">
  </iframe>
  <!-- Controles visibles -->
  <div style="margin-top:6px;">
    <button id="prevBtn">⏮</button>
    <button id="playPauseBtn">▶</button>
    <button id="nextBtn">⏭</button>
    <input id="volumeSlider" type="range" min="0" max="100" value="80" style="width:100px;vertical-align:middle;">
  </div>
</div>

<script src="https://w.soundcloud.com/player/api.js"></script>
<script>
const scIframe = document.getElementById('scPlayer');
const scWidget = SC.Widget(scIframe);

let widgetReady = false;
let isPlaying = false;

const playPauseBtn = document.getElementById('playPauseBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const volumeSlider = document.getElementById('volumeSlider');

scWidget.bind(SC.Widget.Events.READY, function(){
  widgetReady = true;
  scWidget.setVolume(parseInt(volumeSlider.value,10));
  playPauseBtn.disabled = false;
  volumeSlider.disabled = false;
});

scWidget.bind(SC.Widget.Events.PLAY, function(){
  isPlaying = true;
  playPauseBtn.textContent = "⏸";
});
scWidget.bind(SC.Widget.Events.PAUSE, function(){
  isPlaying = false;
  playPauseBtn.textContent = "▶";
});
scWidget.bind(SC.Widget.Events.FINISH, function(){
  isPlaying = false;
  playPauseBtn.textContent = "▶";
});

playPauseBtn.addEventListener("click", ()=>{
  if(!widgetReady) return;
  if(isPlaying) scWidget.pause(); else scWidget.play();
});
prevBtn.addEventListener("click", ()=>{ if(widgetReady) scWidget.prev(); });
nextBtn.addEventListener("click", ()=>{ if(widgetReady) scWidget.next(); });
volumeSlider.addEventListener("input", e=>{
  if(widgetReady) scWidget.setVolume(parseInt(e.target.value,10));
});
</script>


